---
import App from '@/components/pages/detail.astro';
import getWorks from '@/lib/getWorks.ts';

export const prerender = false; // keeps this page static if you use hybrid

const { work_id } = Astro.params;

if (!Astro.props.work) {
  return Astro.redirect("/404");
}

const works = await getWorks();
const work = works.find((w) => w.id === work_id);

if (!work) {
  throw new Error(`Work not found: ${work_id}`);
}
---

<App work={work} />
